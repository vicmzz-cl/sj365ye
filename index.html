<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flagle Clone</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f2f2f2;
    margin: 0;
    padding: 20px;
  }
  h1 {
    color: #333;
  }
  #flag {
    width: 320px;
    height: 200px;
    margin: 20px auto;
    position: relative;
    border: 2px solid #333;
    overflow: hidden;
    background-size: cover;
    background-position: center;
  }

  /* Camadas que cobrem partes da bandeira */
  .piece {
    position: absolute;
    width: 100%;
    height: calc(100% / 6);
    background: #f2f2f2;
    transition: opacity 0.5s;
  }

  #inputArea {
    margin-top: 20px;
  }
  input {
    padding: 10px;
    width: 220px;
    font-size: 16px;
  }
  button {
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
    margin: 5px;
  }
  #result {
    margin-top: 20px;
    font-size: 20px;
  }
</style>
</head>
<body>
<h1>üåç Jogo das Bandeiras</h1>

<div id="flag"></div>

<div id="inputArea">
  <input list="countriesList" type="text" id="guessInput" placeholder="Digite o pa√≠s..." autocomplete="off" />
  <datalist id="countriesList"></datalist>
  <button onclick="makeGuess()">Palpitar</button>
  <button onclick="restartGame()">üîÑ Reiniciar</button>
</div>

<p id="attempts">Tentativas restantes: <span id="remaining">6</span></p>
<p id="result"></p>

<script>
const countries = [
  { name: "Brasil", flag: "https://flagcdn.com/w320/br.png" },
  { name: "Estados Unidos", flag: "https://flagcdn.com/w320/us.png" },
  { name: "Jap√£o", flag: "https://flagcdn.com/w320/jp.png" },
  { name: "Alemanha", flag: "https://flagcdn.com/w320/de.png" },
  { name: "Fran√ßa", flag: "https://flagcdn.com/w320/fr.png" },
  { name: "Canad√°", flag: "https://flagcdn.com/w320/ca.png" },
  { name: "It√°lia", flag: "https://flagcdn.com/w320/it.png" },
  { name: "Argentina", flag: "https://flagcdn.com/w320/ar.png" },
  { name: "M√©xico", flag: "https://flagcdn.com/w320/mx.png" },
  { name: "Espanha", flag: "https://flagcdn.com/w320/es.png" }
];

// preenche sugest√µes no datalist
const dataList = document.getElementById("countriesList");
countries.forEach(c => {
  const opt = document.createElement("option");
  opt.value = c.name;
  dataList.appendChild(opt);
});

let secret, attempts;
const flagDiv = document.getElementById("flag");

function initGame() {
  flagDiv.innerHTML = ""; // limpa bandeira anterior
  secret = countries[Math.floor(Math.random() * countries.length)];
  attempts = 6;
  document.getElementById("remaining").innerText = attempts;
  document.getElementById("result").innerHTML = "";
  document.getElementById("guessInput").disabled = false;
  document.getElementById("guessInput").value = "";

  flagDiv.style.backgroundImage = `url(${secret.flag})`;

  // criar 6 coberturas
  for (let i = 0; i < 6; i++) {
    const piece = document.createElement("div");
    piece.classList.add("piece");
    piece.style.top = `${(100 / 6) * i}%`;
    flagDiv.appendChild(piece);
  }
}

function revealPart() {
  const pieces = document.querySelectorAll(".piece");
  const partToReveal = 6 - attempts; // revela 1 nova parte
  if (pieces[partToReveal - 1]) {
    pieces[partToReveal - 1].style.opacity = "0";
  }
}

function makeGuess() {
  const input = document.getElementById("guessInput");
  const guess = input.value.trim().toLowerCase();
  if (!guess) return;

  if (guess === secret.name.toLowerCase()) {
    document.getElementById("result").innerHTML = `üéâ Correto! Era ${secret.name}!`;
    revealAll();
    disableInput();
    return;
  }

  attempts--;
  document.getElementById("remaining").innerText = attempts;
  revealPart();

  if (attempts <= 0) {
    document.getElementById("result").innerHTML = `‚ùå Voc√™ perdeu! Era ${secret.name}.`;
    revealAll();
    disableInput();
  }

  input.value = "";
}

function revealAll() {
  document.querySelectorAll(".piece").forEach(p => (p.style.opacity = "0"));
}

function disableInput() {
  document.getElementById("guessInput").disabled = true;
}

function restartGame() {
  initGame();
}

// iniciar jogo
initGame();
</script>
</body>
</html>
